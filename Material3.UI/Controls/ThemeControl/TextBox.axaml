<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    x:ClassModifier="internal">
  
  <Design.PreviewWith>
    <Border Background="{DynamicResource Surface}" Padding="20">
      <StackPanel Spacing="5">
        <TextBox Watermark="floatingWatermark"
                 UseFloatingWatermark="True"/>
        <TextBox Watermark="watermark"/>
        <TextBox Text="Normal TextBox"/>
      </StackPanel>
    </Border>
  </Design.PreviewWith>
  
  <!-- -->
  <!-- <ControlTheme x:Key="SimpleTextBoxClearButtonTheme" -->
  <!--               BasedOn="{StaticResource {x:Type Button}}" -->
  <!--               TargetType="Button"> -->
  <!--   <Setter Property="Cursor" Value="Arrow" /> -->
  <!--   <Setter Property="Template"> -->
  <!--     <Setter.Value> -->
  <!--       <ControlTemplate TargetType="Button"> -->
  <!--         <Border x:Name="PART_ButtonLayoutBorder" -->
  <!--                 Background="Transparent" -->
  <!--                 BorderThickness="{TemplateBinding BorderThickness}"> -->
  <!--           <Path x:Name="PART_GlyphElement" -->
  <!--                 Width="10" -->
  <!--                 Height="10" -->
  <!--                 HorizontalAlignment="Center" -->
  <!--                 VerticalAlignment="Center" -->
  <!--                 Data="{StaticResource TextBoxClearButtonData}" -->
  <!--                 Fill="{DynamicResource ThemeForegroundColor}" -->
  <!--                 Stretch="Uniform" /> -->
  <!--         </Border> -->
  <!--       </ControlTemplate> -->
  <!--     </Setter.Value> -->
  <!--   </Setter> -->
  <!-- </ControlTheme> -->
  <!-- -->
  <!-- <ControlTheme x:Key="SimplePasswordBoxRevealButtonTheme" -->
  <!--               BasedOn="{StaticResource {x:Type Button}}" -->
  <!--               TargetType="ToggleButton"> -->
  <!--   <Setter Property="Cursor" Value="Arrow" /> -->
  <!--   <Setter Property="Template"> -->
  <!--     <Setter.Value> -->
  <!--       <ControlTemplate TargetType="ToggleButton"> -->
  <!--         <Border x:Name="PART_ButtonLayoutBorder" -->
  <!--                 Width="12" -->
  <!--                 Background="Transparent"> -->
  <!--           <Panel> -->
  <!--             <Path x:Name="PART_GlyphElement_Reveal" -->
  <!--                   Width="12" -->
  <!--                   Height="8" -->
  <!--                   HorizontalAlignment="Center" -->
  <!--                   VerticalAlignment="Center" -->
  <!--                   Data="{DynamicResource PasswordBoxRevealButtonData}" -->
  <!--                   Fill="{DynamicResource ThemeForegroundColor}" -->
  <!--                   Stretch="Uniform" /> -->
  <!--             <Path x:Name="PART_GlyphElement_Hide" -->
  <!--                   Width="12" -->
  <!--                   Height="12" -->
  <!--                   HorizontalAlignment="Center" -->
  <!--                   VerticalAlignment="Center" -->
  <!--                   Data="{DynamicResource PasswordBoxHideButtonData}" -->
  <!--                   Fill="{DynamicResource ThemeForegroundColor}" -->
  <!--                   Stretch="Uniform" /> -->
  <!--           </Panel> -->
  <!--         </Border> -->
  <!--       </ControlTemplate> -->
  <!--     </Setter.Value> -->
  <!--   </Setter> -->
  <!-- -->
  <!--   <Style Selector="^:unchecked /template/ Path#PART_GlyphElement_Hide"> -->
  <!--     <Setter Property="IsVisible" Value="False" /> -->
  <!--   </Style> -->
  <!--   <Style Selector="^:checked /template/ Path#PART_GlyphElement_Reveal"> -->
  <!--     <Setter Property="IsVisible" Value="False" /> -->
  <!--   </Style> -->
  <!-- </ControlTheme> -->

  
  <!-- <MenuFlyout x:Key="SimpleTextBoxContextFlyout" ShowMode="{OnFormFactor Desktop=Standard, Mobile=Transient}" Placement="Bottom"> -->
  <!--   <MenuItem Header="{DynamicResource StringTextFlyoutCutText}" Command="{Binding $parent[TextBox].Cut}" -->
  <!--             IsEnabled="{Binding $parent[TextBox].CanCut}" InputGesture="{x:Static TextBox.CutGesture}" /> -->
  <!--   <MenuItem Header="{DynamicResource StringTextFlyoutCopyText}" Command="{Binding $parent[TextBox].Copy}" -->
  <!--             IsEnabled="{Binding $parent[TextBox].CanCopy}" InputGesture="{x:Static TextBox.CopyGesture}" /> -->
  <!--   <MenuItem Header="{DynamicResource StringTextFlyoutPasteText}" Command="{Binding $parent[TextBox].Paste}" -->
  <!--             IsEnabled="{Binding $parent[TextBox].CanPaste}" InputGesture="{x:Static TextBox.PasteGesture}" /> -->
  <!-- </MenuFlyout> -->
  
  <ControlTheme x:Key="{x:Type TextBox}"
                TargetType="TextBox">
    <Setter Property="CaretBrush" Value="{DynamicResource Primary}" />
    <Setter Property="Height" Value="56"/>
    <Setter Property="CornerRadius" Value="4"/>
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderBrush" Value="{DynamicResource Outline}" />
    <Setter Property="Foreground" Value="{DynamicResource OnSurface}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="SelectionBrush" Value="{DynamicResource Primary}" />
    <Setter Property="SelectionForegroundBrush" Value="{DynamicResource Surface}" />
    <Setter Property="Padding" Value="16 8 16 8" />
    <!-- <Setter Property="ContextFlyout" Value="{StaticResource SimpleTextBoxContextFlyout}" /> -->
    <Setter Property="ScrollViewer.IsScrollChainingEnabled" Value="True" />
    <Setter Property="Template">
      <ControlTemplate>
        <Border Name="border"
                Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                CornerRadius="{TemplateBinding CornerRadius}">
          <DockPanel Margin="{TemplateBinding Padding}"
                     HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                     VerticalAlignment="{TemplateBinding VerticalContentAlignment}">

            <Border Name="watermark" Background="{DynamicResource Surface}">
              <Border.RenderTransform>
                <TranslateTransform X="0" Y="0"/>
              </Border.RenderTransform>
              <Border.Transitions>
                <Transitions>
                  <TransformOperationsTransition Property="RenderTransform"  
                                                 Duration="0:0:0.2"  
                                                 Easing="CubicEaseOut">
                  </TransformOperationsTransition>
                </Transitions>
              </Border.Transitions>
              <TextBlock Name="watermarkText"
                Foreground="{DynamicResource OnSurfaceVariant}"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"   
                Text="{TemplateBinding Watermark}"
                TextAlignment="{TemplateBinding TextAlignment}"
                TextWrapping="{TemplateBinding TextWrapping}">
                <TextBlock.Transitions>
                  <Transitions>
                    <BrushTransition Property="Foreground" Duration="0:0:0.2" />
                  </Transitions>
                </TextBlock.Transitions>
                <TextBlock.IsVisible>
                  <MultiBinding Converter="{x:Static BoolConverters.And}">
                    <Binding ElementName="PART_TextPresenter" Path="PreeditText" Converter="{x:Static StringConverters.IsNullOrEmpty}"/>
                    <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Text" Converter="{x:Static StringConverters.IsNullOrEmpty}"/>
                  </MultiBinding>
                </TextBlock.IsVisible>
              </TextBlock>
            </Border>
            
            <TextBlock Name="floatingWatermark"
                       DockPanel.Dock="Top"
                       FontSize="8"
                       Foreground="{DynamicResource Primary}"
                       Text="{TemplateBinding Watermark}">
              <TextBlock.IsVisible>
                <MultiBinding Converter="{x:Static BoolConverters.And}">
                  <Binding Path="UseFloatingWatermark"
                           RelativeSource="{RelativeSource TemplatedParent}" />
                  <Binding Converter="{x:Static StringConverters.IsNotNullOrEmpty}"
                           Path="Text"
                           RelativeSource="{RelativeSource TemplatedParent}" />
                </MultiBinding>
              </TextBlock.IsVisible>
            </TextBlock>

            <DataValidationErrors>

              <Grid ColumnDefinitions="Auto,*,Auto">
                <ContentPresenter Grid.Column="0"
                                  Content="{TemplateBinding InnerLeftContent}" />
                <ScrollViewer Name="PART_ScrollViewer"
                              Grid.Column="1"
                              AllowAutoHide="{TemplateBinding (ScrollViewer.AllowAutoHide)}"
                              BringIntoViewOnFocusChange="{TemplateBinding (ScrollViewer.BringIntoViewOnFocusChange)}"
                              HorizontalScrollBarVisibility="{TemplateBinding (ScrollViewer.HorizontalScrollBarVisibility)}"
                              IsScrollChainingEnabled="{TemplateBinding (ScrollViewer.IsScrollChainingEnabled)}"
                              VerticalScrollBarVisibility="{TemplateBinding (ScrollViewer.VerticalScrollBarVisibility)}">
                  <Panel>
               
                    
                    <TextPresenter Name="PART_TextPresenter"
                                   VerticalAlignment="Center"
                                   CaretBlinkInterval="{TemplateBinding CaretBlinkInterval}"
                                   CaretBrush="{TemplateBinding CaretBrush}"
                                   CaretIndex="{TemplateBinding CaretIndex}"
                                   LineHeight="{TemplateBinding LineHeight}"
                                   LetterSpacing="{TemplateBinding LetterSpacing}"
                                   PasswordChar="{TemplateBinding PasswordChar}"
                                   RevealPassword="{TemplateBinding RevealPassword}"
                                   SelectionBrush="{TemplateBinding SelectionBrush}"
                                   SelectionEnd="{TemplateBinding SelectionEnd}"
                                   SelectionForegroundBrush="{TemplateBinding SelectionForegroundBrush}"
                                   SelectionStart="{TemplateBinding SelectionStart}"
                                   Text="{TemplateBinding Text,Mode=TwoWay}"
                                   TextAlignment="{TemplateBinding TextAlignment}"
                                   TextWrapping="{TemplateBinding TextWrapping}" />
                  </Panel>
                  <ScrollViewer.Styles>
                    <Style Selector="ScrollContentPresenter#PART_ContentPresenter">
                      <Setter Property="Cursor" Value="IBeam" />
                    </Style>
                  </ScrollViewer.Styles>
                </ScrollViewer>
                <ContentPresenter Grid.Column="2"
                                  Content="{TemplateBinding InnerRightContent}" />
              </Grid>
            </DataValidationErrors>
          </DockPanel>
        </Border>
      </ControlTemplate>
    </Setter>

    <Style Selector="^:pointerover /template/ Border#border">
      <Setter Property="BorderBrush" Value="{DynamicResource OnSurface}" />
    </Style>
    
    <Style Selector="^:focus /template/ Border#watermark">
      <Setter Property="RenderTransform" Value="translate(-10px, -25px)" />
    </Style>
    
    <Style Selector="^:focus /template/ TextBlock#watermarkText">
      <Setter Property="Foreground" Value="{DynamicResource OnSurface}" />
      <Setter Property="FontSize" Value="12" />
    </Style>
    <!-- <Style Selector="^:focus /template/ Border#border"> -->
    <!--   <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorderHighBrush}" /> -->
    <!-- </Style> -->
    <!-- <Style Selector="^:error /template/ Border#border"> -->
    <!--   <Setter Property="BorderBrush" Value="{DynamicResource ErrorBrush}" /> -->
    <!-- </Style> -->
    <!-- <Style Selector="^ /template/ DockPanel"> -->
    <!--   <Setter Property="Cursor" Value="IBeam" /> -->
    <!-- </Style> -->
    <!-- <Style Selector="^:disabled /template/ Border#border"> -->
    <!--   <Setter Property="Opacity" Value="{DynamicResource ThemeDisabledOpacity}" /> -->
    <!-- </Style> -->
    <!-- <Style Selector="^ /template/ TextBlock#floatingWatermark"> -->
    <!--   <Setter Property="Cursor" Value="IBeam"/> -->
    <!-- </Style> -->
    <!-- -->
    
    <!-- <Style Selector="^.clearButton[AcceptsReturn=False][IsReadOnly=False]:focus:not(TextBox:empty)"> -->
    <!--   <Setter Property="InnerRightContent"> -->
    <!--     <Template> -->
    <!--       <Button Command="{Binding $parent[TextBox].Clear}" -->
    <!--               Focusable="False" -->
    <!--               Theme="{StaticResource SimpleTextBoxClearButtonTheme}"  -->
    <!--               ClipToBounds="True" /> -->
    <!--     </Template> -->
    <!--   </Setter> -->
    <!-- </Style> -->
    <!-- -->
    <!-- <Style Selector="^.revealPasswordButton[AcceptsReturn=False][IsReadOnly=False]:not(TextBox:empty)"> -->
    <!--   <Setter Property="InnerRightContent"> -->
    <!--     <Template> -->
    <!--       <Panel Margin="4,0"> -->
    <!--         <Panel.Styles> -->
    <!--           <Style Selector="ToggleButton[IsChecked=True]"> -->
    <!--             <Setter Property="(ToolTip.Tip)" Value="Hide Password" /> -->
    <!--           </Style> -->
    <!--           <Style Selector="ToggleButton[IsChecked=False]"> -->
    <!--             <Setter Property="(ToolTip.Tip)" Value="Show Password" /> -->
    <!--           </Style> -->
    <!--         </Panel.Styles> -->
    <!--         <ToggleButton Background="Transparent" -->
    <!--                       Focusable="False" -->
    <!--                       IsChecked="{Binding $parent[TextBox].RevealPassword, Mode=TwoWay}" -->
    <!--                       Theme="{StaticResource SimplePasswordBoxRevealButtonTheme}" -->
    <!--                       ClipToBounds="True" /> -->
    <!--       </Panel> -->
    <!--     </Template> -->
    <!--   </Setter> -->
    <!-- </Style> -->
  </ControlTheme>
</ResourceDictionary>